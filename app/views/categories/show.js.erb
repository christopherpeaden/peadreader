$("div.container").html("<%= j(render "show") %>");
$("div#sidebar").html("<%= j(render "layouts/sidebar") %>")
$("div#sidebar-header").html("<%= j(render "layouts/sidebar_header") %>")

$(function() {
  allButtons = document.getElementsByClassName("btn");

  for (var counter = 0; counter < allButtons.length; counter++) {
    allButtons[counter].addEventListener("mouseover", function() {
      this.style.margin = "0px 0px -0px -1px";
    })

    allButtons[counter].addEventListener("mouseout", function() {
      this.style.margin = "0px 0px 0px 1px";
    })
  }

  var dropdownLists = document.getElementById("sidebar").getElementsByClassName("dropdown-list");
  var dropdownListItems = document.getElementById("sidebar").getElementsByClassName("invisible");

  for(var x = 0; x < dropdownListItems.length; x++) {
    dropdownListItems[x].style.display = "none";
    var dropdownLinks = dropdownListItems[x].getElementsByTagName("a");
    for(var i = 0; i < dropdownLinks.length; i++) {
      if (window.location.href == dropdownLinks[i].href) {
        dropdownLinks[i].style.color = "black";
        dropdownLinks[i].style.fontWeight = "bold";
        dropdownListItems[x].style.display = "block";
      }
    }
  }

  for (var n = 0; n < dropdownLists.length; n++) {
    categoryLinks = dropdownLists[n].getElementsByTagName("a");
    if (window.location.href == categoryLinks[0].href) {
      categoryDropdown = dropdownLists[n].getElementsByClassName("invisible");
      categoryDropdown[0].style.display = "block";
    }
  }


  var carets = document.getElementsByClassName("caret");

  for(var x = 0; x < carets.length; x++) {
    carets[x].addEventListener("click", function() {
      var dropdownListItems = this.getElementsByClassName("invisible");

      for(var x = 0; x < dropdownListItems.length; x++) {
        if (dropdownListItems[x].style.display == "none") {
          dropdownListItems[x].style.display = "block";
        }  else  {
          dropdownListItems[x].style.display = "none";
        }
      }
    })
  }
})
